<div class="row valign-wrapper white z-depth-2">
    <div class="col s6" ng-init="sortBy = 'id'; showAll = true">
        <label>Sort:</label>
        <button class="btn-xs waves-effect waves-light btn btn-flat {{ (sortBy === 'id')? 'active':'' }}" ng-click="sortBy = 'id'"><i class="fa fa-sort-numeric-asc fa-fw"></i></button>
        <button class="btn-xs waves-effect waves-light btn btn-flat {{ (sortBy === 'name')? 'active':'' }}" ng-click="sortBy = 'name'"><i class="fa fa-sort-alpha-asc fa-fw"></i></button>
        <button class="btn-xs waves-effect waves-light btn btn-flat {{ (sortBy === '-egg')? 'active':'' }}" ng-click="sortBy = '-egg'"><span class="fa-fw"><img class="egg-icon" src="assets/images/pokemons/000.png"></span></button>
        <label>Kind:</label>
        <button class="btn-xs waves-effect waves-light btn btn-flat {{ (showAll === true )? 'active':''}}" ng-click="showAll = true">All</button>
        <button class="btn-xs waves-effect waves-light btn btn-flat {{ (!showAll && hasSeen)? 'active':''}}" ng-click="hasSeen = true; showAll = false;"><span class="fa-fw"><img class="pikachu-icon" src="assets/images/pokemons/025.png"></span></button>
        <button class="btn-xs waves-effect waves-light btn btn-flat {{ (!showAll && !hasSeen)? 'active':''}}" ng-click="hasSeen = false; showAll = false;"><span class="fa-fw"><img class="pikachu-icon unseen" src="assets/images/pokemons/025.png"></span></button>
    </div>

    <div class="input-group col s6 right hoverable">
        <input id="search-input" placeholder="&#xf002; Search" type="text" ng-model="query" style="font-family:Arial, FontAwesome">
        <div class="input-group-addon">{{(pokemon | filter:{keywords:query}).length}}</div>
    </div>
</div>

<div class="row pokemon-item valign-wrapper white z-depth-2" ng-repeat="p in pokemon | filter:{keywords:query} | orderBy:sortBy track by p.id">
    <div class="col s2 sprite">
        <img src="{{p.img}}" class="img-responsive {{(pokedex[p.name])?'seen':'unseen'}}" ng-click="(pokedex[p.name])?deregister(p.id):register(p.id);">
    </div>
    <div class="col s2">
        <div class="col s12 pokemon-name">
            <div>{{ p.name }}</div>
        </div>
        <div class="col s12">
            <div class="pull-left"><span class="label label-evolution">{{p.id | pokeidx}}</span>&nbsp;</div>
            <div class="pull-left" ng-repeat="type in p.type"><span class="label label-{{type | lowercase}}">{{type}}</span>&nbsp;</div>
            <div class="pull-left" ng-if="p.egg"><span class="label label-egg"><img src="assets/images/pokemons/000.png" class="egg-icon-xs">&nbsp;{{ p.egg }}km</span>&nbsp;</div>
            <div class="pull-left" ng-if="p.location"><span class="label label-{{p.location | lowercase | spaceless}}"><i class="fa fa-map-marker"></i>&nbsp;{{p.location}}</span>&nbsp;</div>
        </div>
    </div>
    <div class="col s8">
        <div ng-if="p.next_evolution.length" class="col s12">
            <div class="pull-left"><span class="label label-evolution"><i class="fa {{(p.next_evolution.length >1)?'fa-reply-all':'fa-reply' }} fa-fw fa-rotate-180"></i></span></div>
            <div class="pull-left" ng-repeat="n in p.next_evolution">&nbsp;<span class="label label-evolution">{{n | pokeidx}}</span></div>
        </div>
        <div ng-if="p.strengths.length" class="col s12">
            <div class="pull-left"><span class="label label-strengths"><i class="fa fa-reply-all fa-rotate-90 fa-fw"></i></span></div>
            <div class="pull-left" ng-repeat="type in p.strengths">&nbsp;<span class="label label-{{type | lowercase}}">{{type}}</span></div>
        </div>
        <div ng-if="p.weaknesses.length" class="col s12">
            <div class="pull-left"><span class="label label-weaknesses"><i class="fa fa-reply-all fa-rotate-270 fa-fw"></i></span></div>
            <div class="pull-left" ng-repeat="type in p.weaknesses">&nbsp;<span class="label label-{{type | lowercase}}">{{type}}</span></div>
        </div>
        <div class="col s12">
            <div class="progress progress-striped">
                <div ng-if="pokedex[p.candy]!==undefined && p.candy_count" class="progress-bar label-{{p.type[0] | lowercase}}" role="progressbar" style="width:{{pokedex[p.candy]/p.candy_count*100}}%"></div>
                <div ng-if="pokedex[p.candy]!==undefined && p.candy_count" class="pull-right">{{pokedex[p.candy]}}/{{p.candy_count}}&nbsp;</div>
                <div ng-if="pokedex[p.candy]!==undefined && !p.candy_count" class="progress-bar label-{{p.type[0] | lowercase}}" role="progressbar" style="width:{{pokedex[p.candy]?100:0}}%"></div>
                <div ng-if="pokedex[p.candy]!==undefined && !p.candy_count" class="pull-right">{{pokedex[p.candy]}}&nbsp;</div>
            </div>
        </div>
    </div>
</div>
<div class="row pokemon-item valign-wrapper grey-text white z-depth-2" ng-if="(pokemon | filter:{keywords:query}).length===0" style="height:200px;">
    <div class="col s12">
    <h5 class="center">No sightings yet.</h5>
    <h5 class="center"><i class="fa fa-search"></i></h5>
    </div>
</div>